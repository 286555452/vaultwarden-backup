version: '3'

services:

  bitwardenrs:
    image: bitwardenrs/server:1.16.3
    restart: always
    # environment:
    #   SIGNUPS_ALLOWED: 'false'
    #   ADMIN_TOKEN: 'your authentication token'
    ports:
      - '127.0.0.1:8200:80'
    volumes:
      - bitwardenrs-data:/data/

  backup:
    image: ttionya/bitwardenrs-backup:latest
    restart: always
    # environment:
    #   RCLONE_REMOTE_NAME: 'BitwardenBackup'
    #   RCLONE_REMOTE_DIR: '/BitwardenBackup/'
    #   CRON: '5 * * * *'
    #   ZIP_ENABLE: 'TRUE'
    #   ZIP_PASSWORD: 'WHEREISMYPASSWORD?'
    #   BACKUP_KEEP_DAYS: 0
    #   MAIL_SMTP_ENABLE: 'FALSE'
    #   MAIL_SMTP_VARIABLES: ''
    #   MAIL_TO: ''
    #   MAIL_WHEN_SUCCESS: 'TRUE'
    #   MAIL_WHEN_FAILURE: 'TRUE'
    #   TIMEZONE: 'UTC'
    volumes:
      - bitwardenrs-data:/bitwarden/data/
      - bitwardenrs-rclone-data:/config/

volumes:
  bitwardenrs-data:
  bitwardenrs-rclone-data:
    external: true
